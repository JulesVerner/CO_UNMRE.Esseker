#include "script_component.hpp"

params ["_camShots", ["_jip", true]];

missionNamespace setVariable ["UNMRE_introStarted", true];

if (didJIP) exitWith {
    missionNamespace setVariable ["UNMRE_introDone", true];

    if (!(missionNamespace getVariable ["UNMRE_introDoneServer", false])) then {
        private _number = player getVariable ["introBoat", 0];
        private _boatID = format ["introBoat_%1", _number];

        [{
            params ["_boatID"];
            !(isNull missionNamespace getVariable [_boatID, objNull])
        },
        {
            params ["_boatID"];
            private _boat = missionNamespace getVariable [_boatID, objNull];

            player moveInAny _boat;
            
        },[_boatID]] call CBA_fnc_waitUntilAndExecute;
    };

    cutText ["", "BLACK IN", 20];
    7 fadeSound 1;
};

STHud_UIMode = 0;
diwako_dui_main_toggled_off = true;

player setVariable ["tf_voiceVolume", 0, true];
// showChat false;
// 1 fadeSound 1;

private _goggles = goggles player;
player setVariable ["UNMRE_gogglesCache", _goggles];
player unlinkItem _goggles;

private _cam = objNull;

private _first = _camShots select 0;
_first params ["_type", "_duration"];

if (_type== "CAMERA") then {
    _cam = _first call GRAD_introCam_fnc_createCam;
    _camShots deleteAt 0;
}else{
    _cam = [[0,0,2],[0,0,0]] call GRAD_introCam_fnc_createCam;
    _duration = 0;
};

[{_this call GRAD_introCam_fnc_handleNextShot;}, [_camShots, _cam], _duration] call CBA_fnc_waitAndExecute;
